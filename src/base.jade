debug = false
version = 'alpha'
current_year = new Date().getFullYear()

!!! 5
html
	head
		//- TODO: add manifest="manifest.mf" + make file
		meta(http-equiv='Content-Type', content='text/html', charset='utf-8')
		title CSD
		link#favicon(href='/static/favicon.ico', rel='shortcut icon')


		style
			block style
				//- ERROR: passing false to compress still compresses the stylesheet!!!
				:stylus(compress=debug, inline=true)
					@import "stylus/base"

					//toggleJS
					@import "stylus/toggle"

					//Chosen jQuery Select Box
					@import "stylus/chosen"

					//JGrowl
					@import "stylus/jgrowl"

					//Tipsy
					@import "stylus/tipsy"

		//- TODO: add IE style sheet to fix everything in that awful browser (low priority) & change below to regular comment
		//- if lt IE 9
			link(rel='stylesheet', type='text/css', href='/static/css/style-ie.css')

		//- TODO: add meta tags for bookmarks and/or for search engines
	body
		#layout
			#main
				ul#navbar
					//add background to navbar parts, like github?
					block global_nav
						//- this block holds buttons which are always displayed on all pages
						//- append to this block to add button sets or buttons

						li.buttonset
							block local_nav
								//- this block holds buttons that are used for local navigation (not all of them are displayed at once)
								//- prepend to this block to add buttons to the buttonset

						li.buttonset#account_bar
							+nav_button('account','Account Settings')
								| Guest
							
							+nav_button('login')
								include svg/login
								include svg/logout

							+nav_button('training')
								include svg/training

					block global_controls
						//- this block holds buttons which are used on all pages as controls

						//- contact button is temporarly removed... will work on it later
							button(type="button",title="Contact",onclick="window.location='#contact'")
								include svg/contact

					block local_controls
						//- this block holds buttons which are used on specific pages for controls (ctrl_buttons)

						//- TODO: disable submit button when pressed, until form change (check with error check function)
						li
							+ctrl_button('submit')
								include svg/submit
							

					//-li
					//-	button.signup-c.local(type="button",onclick="postSignup()",title="submit signup form") Submit
					
				a#logo(href="#home",title="CORE 2062 Scouting Database")
					include svg/logo
				
				hr
			
				#content
					noscript
						p Um, this is awkward&hellip; all navigation (and most of the functionality) on this site relies on JavaScript, a programming language that helps add interactivity to web sites. So I can't really do anything until you enable it. If you don't know how to enable JavaScript, look <a href="http://www.activatejavascript.org">here</a>.
					
					block content

				#sidebar
					//- other sidebar stuff goes here
					#jGrowl-container.jGrowl.bottom-right
					//- TODO: fix jGrowl positioning - align with bottom of side bar (add pooling? ... or mechanism to remove messages when there are too many? ... or scroll bar on message container - not including "close all" in scroll?)
					//- TODO: create classes of jGrowl notifications to close selectively

		#foot

			//- Google +1 Button
			//- TODO: make a +Snippet https://developers.google.com/+/plugins/+1button/#plusonetag
			.g-plusone(data-size="medium", callback="plusone()", data-href="www.urlofmysite.com")
			
			#page_footer
				#progressbar
					#progressbar_value
					#errorbar_value

				p
					| CORE Scouting Database - Created By 
					a(href="#contact") Sean Lang
					|  - &copy;#{current_year} - version: #{version}	

		#modal_aligner
			#modal_wrapper
				#modal_container(style="display: none")
					#modal_titlebar
						span#modal_title Title
						//- remove the extra a tag ?
						a.close(onclick='modalClose()')
							span.icon.icon_closethick

					block modal_content

					#modal_buttons
						block modal_buttons

		#overlay(onclick='modalClose()')

		//- Piwik
		script.
			var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.packwi.com/" : "http://piwik.packwi.com/");
			document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
		script.
			try {
				var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 2);
				piwikTracker.trackPageView();
				piwikTracker.enableLinkTracking();
			} catch(err) {}
			
		noscript
			p
				img(src="http://piwik.packwi.com/piwik.php?idsite=2", style="border:0", alt="")

		script
			//- the scripts included here by default are those needed for multiple pages in the site
			//- scripts which are only needed for one page may be appended to this block
			include coffee/jquery.js
			include coffee/json2js.js
			include coffee/underscore.js
			include coffee/backbone.js
			include coffee/jgrowl.js
			include coffee/tipsy.js
			include coffee/base.js
			//- include coffee/chosen.js
			//- include coffee/toggle.js